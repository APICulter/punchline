<!DOCTYPE html>
<html>
	<head>
		<title>Hello world</title>
	</head>
	<script src="/socket.io/socket.io.js"></script>

	<body>
		<div>
			<button
				id="createGame"
				type="button"
				name="createGame"
				onclick="createGame()"
			>
				Create Game
			</button>
		</div>

		
		<div>
			<button
				id="join-room-button"
				type="button"
				name="play"
				onclick="joinRoom()"
			>
				Join room
			</button>
		</div>

		

		
	</body>

	<script>
		const socket = io();

		//creation de la game
		function createGame() {
			socket.emit("createGame");
		}
		
		socket.on("newGame", function (host, game) {
				sessionStorage.setItem('punchlinePin', game.pin);
				sessionStorage.setItem('hostID', host.id);
				window.location = '/html/createGame.html';
			});

        socket.on("game already exists", function (data) {
			if (user) {
				document.getElementById("pin-created").innerHTML +=
					"<div><b> The player already hosts a game of pin </b>: " + data + "</div>";
			}
		});

		//rejoindre une room
		function joinRoom() {
			window.location = '/html/join.html';
		}

	</script>
</html>
